"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7642],{6158:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>c,toc:()=>a});var t=s(4848),i=s(8453);const o={title:"NSIS Installer Customization",description:"Custom nsis installer script"},r=void 0,c={id:"nsis-installer_customization",title:"NSIS Installer Customization",description:"Custom nsis installer script",source:"@site/../docs/nsis-installer_customization.md",sourceDirName:".",slug:"/nsis-installer_customization",permalink:"/docs/oclif/docs/nsis-installer_customization",draft:!1,unlisted:!1,editUrl:"https://github.com/oclif/oclif.github.io/tree/docs/docs/../docs/nsis-installer_customization.md",tags:[],version:"current",lastUpdatedBy:"Mike Donnalley",lastUpdatedAt:1711731567e3,frontMatter:{title:"NSIS Installer Customization",description:"Custom nsis installer script"},sidebar:"docs",previous:{title:"JSON",permalink:"/docs/oclif/docs/json"},next:{title:"Release",permalink:"/docs/oclif/docs/releasing"}},l={},a=[];function d(e){const n={a:"a",code:"code",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["Sometimes you need to verify some dependencies, ensure there are no conflicting CLIs installed, or do some other custom logic before installing your CLI. For npm-scenarios, simply specify a ",(0,t.jsx)(n.code,{children:"preinstall"})," script. But Windows installers don't include this script. You must instead write your own nsis modification to do these checks. See where this custom script gets placed in the installer in the ",(0,t.jsx)(n.a,{href:"https://github.com/oclif/oclif/blob/b8d76af9290716ef69d8d1026f98041268306dfd/src/commands/pack/win.ts#L60",children:"oclif/oclif"})," repo."]}),"\n",(0,t.jsxs)(n.p,{children:["See how ",(0,t.jsx)(n.a,{href:"https://github.com/salesforcecli/cli",children:"Salesforce CLI"})," did this to prevent their new major version being installed on top of an older, and incompatible, version. In that ",(0,t.jsx)(n.code,{children:"package.json"}),", they specified an nsis installer like this:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'\r\n{\r\n  "name": "mycli",\r\n  "version": "0.0.0",\r\n  "description": "My CLI",\r\n  "main": "bin/run.js",\r\n  "bin": "./bin/run.js",\r\n  "oclif": {\r\n    "nsisCustomization": "scripts/nsis.nsi"\r\n  }\r\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"And then their custom script was loaded into the installer during the packing phase of the CLI."})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>c});var t=s(6540);const i={},o=t.createContext(i);function r(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);